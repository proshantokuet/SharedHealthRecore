<?xml version="1.0" encoding="UTF-8"?>
 
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
    <!--
        See http://www.liquibase.org/manual/home#available_database_refactorings
        for a list of supported elements and attributes
    -->	 
	<changeSet id="ubs_medicine-1.0.0" author="tanvir">
    	<createTable tableName="ubs_medicines">
    		<column name="medicine_id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="name" type="varchar(255)"/>
    		<column name="code" type="varchar(255)"/>
    		<column name="brandName" type="varchar(255)"/>
    		<column name="category" type="varchar(255)"/>
    		<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
    
    <changeSet id="ubs_prescription-1.0.0" author="tanvir">
    	<createTable tableName="ubs_prescription">
    		<column name="prescription_id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="patient_name" type="varchar(255)"/>
    		<column name="gender" type="varchar(255)"/>
    		<column name="visit_date" type="datetime"/>
    		<column name="visit_uuid" type="varchar(255)"/>
    		<column name="age" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
    		<column name="provider_name" type="varchar(255)"/>
    		<column name="provider_info" type="varchar(255)"/>
    		<column name="chief_complaint" type="mediumtext"/>
    		<column name="diagnosis" type="mediumtext"/>
    		<column name="advice" type="mediumtext"/>
			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>
			<column name="changed_by" type="int(11)" />
			<column name="date_changed" type="datetime" />
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
			<column name="voided_by" type="int(11)" />
			<column name="date_voided" type="datetime" />
			<column name="void_reason" type="varchar(255)" />
			<column name="uuid" type="varchar(255)" />
    	</createTable>
    </changeSet>
    
        <changeSet id="ubs_prescribed_medicine-1.0.0" author="tanvir">
    	<createTable tableName="ubs_prescribed_medicines">
    		<column name="prescribed_id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="medicine_name" type="varchar(255)"/>
    		<column name="medicine_id" type="int(11)"/>
    		<column name="frequency" type="varchar(255)"/>
    		<column name="duration" type="int(11)"/>
    		<column name="instruction" type="varchar(2000)"/>
    		
    		<column name="ubs_prescription_id" type="int(11)"/>
    		
			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>
			<column name="changed_by" type="int(11)" />
			<column name="date_changed" type="datetime" />
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
			<column name="voided_by" type="int(11)" />
			<column name="date_voided" type="datetime" />
			<column name="void_reason" type="varchar(255)" />
			<column name="uuid" type="varchar(255)" />
    	</createTable>
    </changeSet>
    	<changeSet id="ubsidgenerate-1.0.0" author="tanvir">
		<createTable tableName="ubs_id_generate">
			<column name="eid" type="int(11)" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" />
			</column>			
			<column name="generate_id" type="int(11)" />
			
			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>		
			
			<column name="date_changed" type="datetime" />
			
			
		</createTable>
	</changeSet>
	
	    <changeSet id="ubs_commodities_distribution-1.0.0" author="tanvir">
    	<createTable tableName="ubs_commodities_distribution">
    		<column name="distribute_id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="patient_name" type="varchar(255)"/>
    		<column name="gender" type="varchar(255)"/>
    		<column name="age" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
    		<column name="provider_name" type="varchar(255)"/>
    		<column name="slip_no" type="varchar(255)"/>
    		<column name="distribute_date" type="datetime"/>
			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>
			<column name="changed_by" type="int(11)" />
			<column name="date_changed" type="datetime" />
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
			<column name="voided_by" type="int(11)" />
			<column name="date_voided" type="datetime" />
			<column name="void_reason" type="varchar(255)" />
			<column name="uuid" type="varchar(255)" />
    	</createTable>
    </changeSet>
    
     <changeSet id="ubs_commodities_details-1.0.0" author="tanvir">
    	<createTable tableName="ubs_commodities_details">
    		<column name="distribute_details_id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="commodities_name" type="varchar(255)"/>
    		<column name="commodities_id" type="int(11)"/>
    		<column name="quantity" type="int(11)"/>
    		
    		<column name="ubs_commodities_details_id" type="int(11)"/>
    		
			<column name="date_created" type="datetime">
				<constraints nullable="false" />
			</column>
			<column name="creator" type="int(11)">
				<constraints nullable="false" />
			</column>
			<column name="changed_by" type="int(11)" />
			<column name="date_changed" type="datetime" />
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
			<column name="voided_by" type="int(11)" />
			<column name="date_voided" type="datetime" />
			<column name="void_reason" type="varchar(255)" />
			<column name="uuid" type="varchar(255)" />
    	</createTable>
    </changeSet>
    <changeSet id="acute_health_condition-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_acute_health_condition">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
    <changeSet id="sexual_reproductive_health-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_sexual_reproductive_health">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
       <changeSet id="ubs_report_non_communicable_dieases-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_non_communicable_dieases">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
     <changeSet id="ubs_report_injuries-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_injuries">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
    <changeSet id="ubs_report_nutrition-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_nutrition">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
    <changeSet id="ubs_report_mental_health-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_mental_health">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
        <changeSet id="ubs_report_communicable_disease-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_communicable_disease">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
    <changeSet id="ubs_report_referrals-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_referrals">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
    <changeSet id="ubs_report_ipd_admission-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_ipd_admission">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
     <changeSet id="ubs_report_ipd_discharge-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_ipd_discharge">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
    <changeSet id="ubs_report_mortality-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_mortality">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
    <changeSet id="ubs_report_child_vaccination-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_child_vaccination">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
    <changeSet id="ubs_report_delivery_service-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_delivery_service">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="issues" type="varchar(500)"/>
    		<column name="value" type="varchar(2000)"/>
    		<column name="encounter_uuid" type="varchar(255)"/>
    		<column name="patient_uuid" type="varchar(255)"/>
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
    <changeSet id="shr_action_audit_info-1.0.0" author="tanvir">
    	<createTable tableName="shr_action_audit_info">
    		<column name="aid" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="record_name" type="varchar(255)"/>
    		<column name="last_id" type="varchar(255)"/>
    		<column name="last_timestamp" type="varchar(255)"/>
    		<column name="action_time" type="varchar(255)" />
			<column name="uuid" type="varchar(255)" />
    	</createTable>
    </changeSet>
        <changeSet id="shr_action_error_log-1.0.0" author="jysan">
    	<createTable tableName="shr_action_error_log">
    		<column name="eid" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="action_type" type="varchar(255)"/>
    		<column name="error_message" type="varchar(255)"/>
    		<column name="uuid" type="varchar(255)" />
    		
    	</createTable>
    </changeSet>
    <changeSet author="jysan" id="shr_action_error_log-1.0.1">
	 	<addColumn tableName="shr_action_error_log">
			<column name="id" type="int(11)" />			
		</addColumn>
	 </changeSet>
	 <changeSet author="jysan" id="shr_action_error_log-1.0.2">
	 	<addColumn tableName="shr_action_error_log">
			<column name="post_json" type="mediumtext" />			
		</addColumn>
	 </changeSet>
	 <changeSet author="jysan" id="shr_action_error_log-1.0.3">
	 	<addColumn tableName="shr_action_error_log">
			<column name="voided" type="int(11)" />			
		</addColumn>
	 </changeSet>
	 <changeSet author="jysan" id="shr_action_error_log-1.0.4">
	 	<addColumn tableName="shr_action_error_log">
			<column name="sent_status" type="int(11)" />			
		</addColumn>
	 </changeSet>
	 <changeSet id="shr_action_error_log-1.0.5" author="jysan">
		<sql>
			ALTER TABLE shr_action_error_log CHANGE error_message error_message mediumtext; 
		</sql>
	</changeSet>
	    <changeSet id="ubs_report_child_information-1.0.0" author="tanvir">
    	<createTable tableName="ubs_report_child_information">
    		<column name="id" type="int(11)" autoIncrement="true">
    			<constraints primaryKey="true" nullable="false" />
    		</column>
    		<column name="birth_weight" type="varchar(255)"/>
    		<column name="neonatal_sepsis" type="varchar(255)"/>
    		<column name="birth_asphyxia" type="varchar(255)"/>
    		<column name="gender" type="varchar(255)" />
			<column name="encounter_uuid" type="varchar(255)" />
			<column name="patient_uuid" type="varchar(255)" />
			<column name="voided" type="tinyint(1)">
				<constraints nullable="false" />
			</column>
    	</createTable>
    </changeSet>
</databaseChangeLog>